# 4.1 디자인 패턴의 이해

소프트웨어를 설계할 때, 특정 맥락에서 자주 발생하는 고질적인 문제들이 또 발생했을 때 재사용할 수 있는 해결책!

각기 다른 소프트웨어 모듈이나 기능을 가진 다양한 응용 소프트웨어 시스템들을 개발할 때도 서로 간에 공통되는 설계 문제가 존재하며 이를 처리하는 사이에도 공통점이 있고 이러하나 유사점을 패턴이라 함

**디자인 패턴의 구조**

- Context : 문제가 발생하는 여러 상황을 기술, 즉 패턴이 적용될 수 있는 상황
- Problem : 패턴이 적용되어 해결될 필요가 있는 여러 디자인 이슈를 기술, 여러 제약 사항과 영향력도 문제 해결을 위해 고려해야 함
- Solution : 문제를 해결하도록 설계를 구성하는 요소들과 그 요소들 사이의 관계, 책임, 협력 관계를 기술

context-problem-solution 으로 구성된 패턴 구조로만은 부족함 특정한 상황에서 생산적인 설계를 위해선 적절히 이름을 붙일 필요가 있음!  
패턴은 공통의 언어를 만들어 팀원 사이의 의사 소통을 원활하게 해주는 중요한 역할을 함

# 4.2 GoF(Gang of Four) 디자인 패턴

4명의 개발자는 Design Patterns: Elements of Reusable Object-Oriented Software 라는 책에서 디자인 패턴을 23가지로 정리함

**생성 패턴**

- 생성 패턴은 객체 생성에 관련된 패턴으로 객체의 생성과 조합을 캡슐화해 특정 객체가 생성되거나 변경되어도 프로그램 구조에 영향을 받지 않도록 유연성을 제공
- Abstract Factory, Builder, Factory Method, Prototype, Singleton

**구조 패턴**

- 클래스나 객체를 조합해 더 큰 구조를 만드는 패턴
- Adapter, Bridge, Composite, Decorator, Facade, Flyweight, Proxy

**행위 패턴**

- 객체나 클래스 사이의 알고리즘이나 책임 분배에 관련된 패턴
- Chain of Responsibility, Command, Interpreter, Iterator, Mediator, Memento, Observer, State, Strategy, Template Method, Visitor

# 4.3 UML과 디자인 패턴

## 4.3.1 Collaboration

디자인 패턴은 목적을 달성하기 위한 역할들의 상호 협동 작업으로 볼 수 있고 UML에서는 객체들이 특정한 상황에서 수행하는 역할의 상호작용을 Collaboration이라는 요소로 작성

UML에서 collaboration은 점선으로 된 타원 기호를 사용하고 타원 내부에 협력을 필요로 하는 역할들과 그들 사이의 연결 관계를 표현

collaboration은 역할들의 상호작용을 추상화한 것으로 특별한 상황에 적용하면 많은 시스템 개발에 재사용할 수 있음

**Collaboration occurrence**

더 구체적인 상황에서의 collaboratoin 적용을 표한하는 것

## 4.3.2 순차 다이어그램

객체들의 상호작용을 나타내는 다이어그램 중 하나로, 객체들 사이의 메시지 송신과 그들의 순서를 나타냄  
왼쪽에서 오른쪽으로 객체를 나열하고, "객체이름:클래스이름" 형식으로 객체를 표기(한쪽 생략 가능)

객체 아래에는 점선(lifeline)이 있고 해당 객체가 존재함을 알려주며 이 생명선을 따라서 좁고 긴 사각형이 나올 수 있는데 이 상자를 활성 구간(activation)이라고 한다  
이는 실제로 객체가 연산을 실행하는 상태임을 보여주고 활성 구간의 크기는 실행시간을 고려햐여 적당히 설정함(생략 가능능)

화살표 빈머리 : 비동기 메세지  
화살표 찬머리 : 동기 메세지  
메시지에는 스테레오 타입을 붙일 수 있음  
메시지 표현 방법 : [시퀀스번호][가드] : 반환값 := 메시지이름([인자 리스트])  
가드는 메시지가 송신되는데 만족해야 하는 조건

다이어그램 내부에는 다이어그램의 경계, 타입, 이름을 포함한 레이블의 장소를 제공하는 프레임을 제공하여 이를 활용하여 다이어그램상에 분기, 반복을 표현할 수 있음

## 4.3.3 순차 다이어그램과 클래스 다이어그램의 관계

순차 다이어그램은 객체 사이의 메시지 흐름과 순서를 알려주는 행위 측면에 중점을 두고 클래스 다이어그램은 구조적인 측면에 중점을 두는 모델임

클래스에서 다른 클래스로 메시지를 보낸다면 연관 또는 의존 관계가 존재하게 되는데 순차 다이어그램을 활용하여 이를 구분할 수 있음

예를 들어 X 에서 Y, Z로 메시지를 보내는 상황

- case 1 : X->Y(m1), X->Z(m2), X->Y(m3)  
  이 경우 X는 m1을 보낸 Y의 인스턴스를 기억해야할 필요가 있음 왜냐하면 해당 인스턴스에 다시 m3를 보내기 때문임, 이런 경우 인스턴스간의 관계는 연관관계로 봐야함
- case 2 : X->Y(m1), X->Z(m2)  
  딱히 인스턴스를 기억할 필요가 없다면 의존 관계로 처리해도 괜찮음
